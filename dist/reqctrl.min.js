!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.RequestControl=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=function(){var a,b=arguments[0],c=arguments.length;for(a=1;c>a;a+=1)b=b.replace(/%s/,arguments[a]);return b}},{}],2:[function(a,b,c){(function(a){b.exports=function(b){var c,d={},e={},f=[],g=a.localStorage||{};return c=function(a,c){var h,i,a,j,k="string"==typeof a,l=typeof c,m="undefined"!==l&&"function"!==l;if("on"===g.lumberjack||b){if(!k||!m)throw Error("Lumberjack Error: log(channel, data) requires an channel {String} and a payload {String|Object|Number|Boolean}.");for(j={time:new Date,data:c,channel:a,id:f.length},d[a]=d[a]||[],d[a].push(j),f.push(j),e[a]=e[a]||[],i=e[a].length,h=0;i>h;h+=1)e[a][h](c)}},c.clear=function(a){a?d[a]=[]:(d={},f=[])},c.readback=function(a,b){var c="string"==typeof a;if(c)return b?JSON.stringify(d[a],null,4):d[a]||[];throw Error("log.readback(channel, pretty) requires an channel {String}.")},c.readback.master=function(a){return a?JSON.stringify(f,null,4):f},c.readback.channels=function(a){var b=Object.keys(d);return a?JSON.stringify(b):b},c.flush=function(a){var b;return a?(b=d[a],d[a]=[]):(d={},f=[],b=[]),b},c.on=function(a,b){var c="string"==typeof a,d="function"==typeof b;if(!c||!d)throw Error("log.on(channel, cb) requires an channel {String} and a callback {Function}.");e[a]=e[a]||[],e[a].push(b)},c.off=function(a){var b="string"==typeof a;if(!b)throw Error("log.off(channel) requires an channel {String}.");e[a]=[]},c.enable=function(){b=!0},c.disable=function(){b=!1},c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(a,b,c){var d=(a("./stat-set.js"),a("./log.js")),e=a("./request-gate.js"),f=a("./marker.js");b.exports=function(a){function b(b){var e=new c(b),h=e.send;return e.send=function(){g.check()?(d("update",{msg:"<Ajax> request allowed",id:a.id}),h.apply(e,arguments)):f(a.id)},e}var c=a.context.XMLHttpRequest,g=e("AJAX",a);return b.rcSpy=!0,c.rcSpy?c:b}},{"./log.js":7,"./marker.js":8,"./request-gate.js":9,"./stat-set.js":11}],4:[function(a,b,c){(function(c){var d=(a("./stat-set.js"),a("./log.js")),e=c.document.createElement("div"),f=a("./request-gate.js"),g=a("./marker.js");b.exports=function(a){function b(b){var f;return e.innerHTML="",c.call(e,b),f=e.innerHTML,f.indexOf("//")>=0?h.check()?(d("update",{msg:"<DomAppend> request allowed",id:a.id,text:f}),c.call(this,b)):(g(a.id),b):(d("update",{msg:"<DomAppend> append allowed",id:a.id}),c.call(this,b))}var c=a.context.Element.prototype.appendChild,h=f("DomAppend",a);return b.rcSpy=!0,c.rcSpy?c:b}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./log.js":7,"./marker.js":8,"./request-gate.js":9,"./stat-set.js":11}],5:[function(a,b,c){(function(c){var d,e=a("./ajax-spy.js"),f=a("./image-spy.js"),g=a("./append-spy.js"),h=a("./log.js");b.exports=function(a){function b(d,i){var j,k,l,m;for(d=d||c.self,(a.log||c.top.rcDebug)&&h.enable(),m={context:d,id:i||"top",grace:a.grace,throttle:a.throttle},(i||!i&&a.top)&&(d.XMLHttpRequest=e(m),d.Image=f(m),d.Element.prototype.appendChild=g(m)),l=d.frames.length,j=0;l>j;j+=1)try{k=d.frames[j],b(k,k.frameElement.id)}catch(n){2===c.top.rcDebug&&h("summary",{msg:"Denied access to iFrame",frame:k,error:n})}}return a=a||{},a.grace=a.grace||100,a.throttle=a.throttle||800,d||(b(),d=c.setInterval(b,1e4)),function(){c.clearInterval(d)}},b.exports.log=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ajax-spy.js":3,"./append-spy.js":4,"./image-spy.js":6,"./log.js":7}],6:[function(a,b,c){var d=(a("./stat-set.js"),a("./log.js")),e=a("./request-gate.js"),f=a("./marker.js");b.exports=function(a){function b(b,e){return g.check()?(d("update",{msg:"<Image> request allowed",id:a.id}),new c(b,e)):(f(a.id),{})}var c=a.context.Image,g=e("Image",a);return b.rcSpy=!0,c.rcSpy?c:b}},{"./log.js":7,"./marker.js":8,"./request-gate.js":9,"./stat-set.js":11}],7:[function(a,b,c){(function(c){var d=a("lumberjackjs");b.exports=d(),b.exports.on("summary",function(a){c.console.log(a)}),b.exports.on("update",function(a){2===c.top.rcDebug&&c.console.log(a)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{lumberjackjs:2}],8:[function(a,b,c){(function(a){var c={};b.exports=function(b){var d;a.top.rcDebug&&(b in c||(d=a.top.document.getElementById(b),d&&(d.style.border="4px solid red")),c[b]=!0)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(a,b,c){(function(c){var d=a("./stat-set.js");b.exports=function(a,b){var e=b.context||c.self;return e.rcStats=e.rcStats||{},e.rcStats[a]=e.rcStats[a]||d(a,b.id),e.rcLast=e.rcLast||{},e.rcLast[a]=e.rcLast[a]||0,{check:function(){var d=c.Date.now(),f=!e.rcLast[a],g=d-e.rcLast[a]>b.throttle,h=this.stats.net.made<b.grace;return this.stats.count.attempted(),h||f||g?(this.close(),this.stats.count.made(),!0):!1},close:function(){e.rcLast[a]=c.Date.now()},open:function(){e.rcLast[a]=0},stats:e.rcStats[a]}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./stat-set.js":11}],10:[function(a,b,c){(function(c){var d=a("curb");b.exports=function(){return{attempted:0,made:0,toString:function(){return d("(made/attempted) %s/%s %s%",this.made,this.attempted,this.attempted?c.Math.round(this.made/this.attempted*100):0)}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{curb:1}],11:[function(a,b,c){(function(c){var d=(a("curb"),a("./stat-node.js")),e=a("./log.js");b.exports=function(a,b){var f={rps:d(),net:d(),count:{made:function(){f.rps.made+=1,f.net.made+=1},attempted:function(){f.rps.attempted+=1,f.net.attempted+=1}}},g=0,h=0;return c.setInterval(function(){f.rps.made=f.net.made-g,f.rps.attempted=f.net.attempted-h,g=f.net.made,h=f.net.attempted},1e3),c.setInterval(function(){c.top.rcDebug&&f.net.attempted>0&&e("summary",{msg:"Net requests",id:b,name:a,net:f.net.toString()})},9e3),f}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./log.js":7,"./stat-node.js":10,curb:1}]},{},[5])(5)});