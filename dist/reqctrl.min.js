!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.RequestControl=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=function(){var a,b=arguments[0],c=arguments.length;for(a=1;c>a;a+=1)b=b.replace(/%s/,arguments[a]);return b}},{}],2:[function(a,b,c){var d=(a("./stat-set.js"),a("./log.js")),e=a("./request-gate.js"),f=a("./marker.js");b.exports=function(a){function b(b){var e=new c(b),h=e.send;return e.send=function(){g.check()?(d(">>> <Ajax> request allowed",a.id),h.apply(e,arguments)):f(a.id)},e}var c=a.context.XMLHttpRequest,g=e("AJAX",a);return b.rcSpy=!0,c.rcSpy?c:b}},{"./log.js":6,"./marker.js":7,"./request-gate.js":8,"./stat-set.js":10}],3:[function(a,b,c){(function(c){var d=(a("./stat-set.js"),a("./log.js")),e=c.document.createElement("div"),f=a("./request-gate.js"),g=a("./marker.js");b.exports=function(a){function b(b){var f;return e.innerHTML="",c.call(e,b),f=e.innerHTML,f.indexOf("http")>=0?h.check()?(d(">>> <DomAppend> request allowed",a.id),c.call(this,b)):(g(a.id),b):c.call(this,b)}var c=a.context.Element.prototype.appendChild,h=f("DomAppend",a);return b.rcSpy=!0,c.rcSpy?c:b}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./log.js":6,"./marker.js":7,"./request-gate.js":8,"./stat-set.js":10}],4:[function(a,b,c){(function(c){var d,e=a("./ajax-spy.js"),f=a("./image-spy.js"),g=a("./append-spy.js"),h=a("./log.js");c.top.rcDebug=!0,b.exports=function(a){function b(d,i){var j,k,l,m;for(d=d||c.self,m={context:d,id:i||"top",grace:a.grace,throttle:a.throttle},d.XMLHttpRequest=e(m),d.Image=f(m),d.Element.prototype.appendChild=g(m),l=d.frames.length,j=0;l>j;j+=1)try{k=d.frames[j].frameElement,b(k.contentWindow,k.id)}catch(n){h("Denied access to",k,n)}}return a=a||{},a.grace=a.grace||50,a.throttle=a.throttle||800,d||(b(),d=c.setInterval(b,1e4)),function(){c.clearInterval(d)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ajax-spy.js":2,"./append-spy.js":3,"./image-spy.js":5,"./log.js":6}],5:[function(a,b,c){var d=(a("./stat-set.js"),a("./log.js")),e=a("./request-gate.js"),f=a("./marker.js");b.exports=function(a){function b(b,e){return g.check()?(d(">>> <Image> request allowed",a.id),new c(b,e)):(f(a.id),{})}var c=a.context.Image,g=e("Image",a);return b.rcSpy=!0,c.rcSpy?c:b}},{"./log.js":6,"./marker.js":7,"./request-gate.js":8,"./stat-set.js":10}],6:[function(a,b,c){(function(a){b.exports=function(){a.top.rcDebug&&a.console.debug.apply(a.console,arguments)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(a,b,c){(function(a){var c={};b.exports=function(b){var d;b in c||(d=a.top.document.getElementById(b),d.style.border="4px solid red"),c[b]=!0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(a,b,c){(function(c){var d=a("./stat-set.js");b.exports=function(a,b){var e=b.context||c.self;return e.rcStats=e.rcStats||{},e.rcStats[a]=e.rcStats[a]||d(a,b.id),e.rcLast=e.rcLast||{},e.rcLast[a]=e.rcLast[a]||0,{check:function(){var d=c.Date.now(),f=!e.rcLast[a],g=d-e.rcLast[a]>b.throttle,h=this.stats.net.made<b.grace;return this.stats.count.attempted(),h||f||g?(this.close(),this.stats.count.made(),!0):!1},close:function(){e.rcLast[a]=c.Date.now()},open:function(){e.rcLast[a]=0},stats:e.rcStats[a]}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./stat-set.js":10}],9:[function(a,b,c){(function(c){var d=a("curb");b.exports=function(){return{attempted:0,made:0,toString:function(){return d("(made/attempted) %s/%s %s%",this.made,this.attempted,this.attempted?c.Math.round(this.made/this.attempted*100):0)}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{curb:1}],10:[function(a,b,c){(function(c){var d=(a("curb"),a("./stat-node.js")),e=a("./log.js");b.exports=function(a,b){var f={rps:d(),net:d(),count:{made:function(){f.rps.made+=1,f.net.made+=1},attempted:function(){f.rps.attempted+=1,f.net.attempted+=1}}},g=0,h=0;return c.setInterval(function(){f.rps.made=f.net.made-g,f.rps.attempted=f.net.attempted-h,g=f.net.made,h=f.net.attempted},1e3),c.setInterval(function(){c.top.rcDebug&&f.net.attempted>0&&e("	net requests",b,a,f.net.toString())},9e3),f}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./log.js":6,"./stat-node.js":9,curb:1}]},{},[4])(4)});